<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=emulateIE7" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="css/style.css" />
<link rel="stylesheet" type="text/css" href="css/WdatePicker.css" />
<link rel="stylesheet" type="text/css" href="css/skin_/form.css" />
<link href="umeditor/themes/default/_css/umeditor.css" type="text/css" rel="stylesheet">
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/global.js"></script>
<script type="text/javascript" src="js/jquery.select.js"></script>
<script type="text/javascript" src="js/WdatePicker.js"></script>
<script type="text/javascript">
window.UMEDITOR_HOME_URL = 'umeditor/';  // 请换成绝对路径
</script>
<script type="text/javascript" src="js/umeditor.config.js"></script>
<script type="text/javascript" src="js/editor_api.js"></script>
<script type="text/javascript" src="umeditor/lang/zh-cn/zh-cn.js"></script>
<title>基础信息</title>
</head>

<body>
<div id="container">
	<div id="hd">
    </div>
    <div id="bd">
    	<div id="main">
            <h2 class="subfild">
            	<span>成绩录入</span>
            </h2>
            <div class="subfild-content base-info">
            	<div class="kv-item ue-clear">
                	<label><span class="impInfo"></span>考试科目</label>
                	<div class="kv-item-content">
                            <div class="kv-item-content">
                                    <select id="les">

                                    </select>
                                </div>
                    </div>
                    <span class="kv-item-tip">注意填写正确性</span>
                </div>
                <div class="kv-item ue-clear time">
                	<label><span class="impInfo"></span>学生学号</label>
                	<div class="kv-item-content">
                    	<input type="text" id="stuNb" placeholder="学生学号"/>
                    
                    </div>
                    <span class="kv-item-tip">注意填写正确性</span>
                </div>
                
                <div class="kv-item ue-clear">
                        <label><span class="impInfo"></span>学生成绩</label>
                        <div class="kv-item-content">
                            <input type="text" id="score" placeholder="学生成绩"/>
                        
                        </div>
                    <span class="kv-item-tip">成绩信息</span>
                </div>
                
                <div class="kv-item ue-clear">
                	<label>是否审核</label>
                	<div class="kv-item-content">
                    	<span class="choose">
                            <span class="checkboxouter">
                                <input type="radio" name="need" value="1"/>
                                <span class="radio"></span>
                            </span>
                            <span class="text">是</span>
                        </span>
                    	<span class="choose">
                            <span class="checkboxouter">
                                <input type="radio" name="need"  value="0"/>
                                <span class="radio"></span>
                            </span>
                            <span class="text">否</span>
                        </span>
                        
                    </div>
                    <span class="kv-item-tip">注意核实成绩是否有误</span>
                </div>
                
      
      
            <div class="buttons">
                <input class="button" onclick="TeaAddScore()" type="button" value="确认录入" />
            </div>
        </div>
    </div>
</div>
</body>

<script type="text/javascript">
	$('select').select();
	showRemind('input[type=text],textarea','color5');
	UM.getEditor('content');
    $.ajax({
        url: "http://localhost:8080/searchLesson",
        type : "post",//请求方式
        contentType: "application/json",
        async: false,   //不要让它异步提交
        dataType: "json",
        success: function (data) {
            var str = '<option value="">请选择录入科目</option>'
            for(var i = 0;i< data.lesson.length;i++){
                str += '<option value="'+data.lesson[i].id+'">'+data.lesson[i].name+'</option>'
            }
            $("#les").html(str);
        }
    })
   function TeaAddScore(){
    var stNb=$("#stuNb").val()
    var lessonId=$("select option:selected").val()
    var score=$("#score").val()
    var check=$("input:radio[name=\"need\"]:checked").val()
       var ids=[]
       ids.push(lessonId)
       ids.push(stNb)
       ids.push(score)
       ids.push(0)
       if(check==1){
           ids[4]=1
       }
       var params = $.param({'add':ids},true);
       $.ajax({
           url: "http://localhost:8080/TeaAddScore",
           type : "post",//请求方式
           async: false,   //不要让它异步提交
           cache : false,
           data:params,
           dataType : 'json',
           success: function (data) {
              alert("录入成功")
           }
       });



   }
</script>
</html>
