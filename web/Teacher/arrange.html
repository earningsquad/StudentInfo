<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=emulateIE7" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="css/style.css" />
<link rel="stylesheet" type="text/css" href="css/WdatePicker.css" />
<link rel="stylesheet" type="text/css" href="css/skin_/table.css" />
<link rel="stylesheet" type="text/css" href="css/jquery.grid.css" />


<title>查看监考安排</title>
</head>

<body>
<div id="container">
	<div id="hd"></div>
    <div id="bd">
    	<div id="main">
        
             
            <div class="table">
            	<div class="opt ue-clear">
                	<span class="sortarea">
						
                    	<span class="sort">
                        	<label>筛选</label>
                            <span class="name">
                            	
								<span class="text"><a href="#">我的科目</a></span>
								<span class="text"><a href="javascript:beInvigilate()">我的监考</a></span>
                            </span>
                        </span>
                        
                   
                    </span>
                	
                </div>
                
                <div class="grid"></div>
                
                <div class="pagination"></div>
            </div>
        </div>
    </div>
</div>
</body>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/global.js"></script>
<script type="text/javascript" src="js/jquery.select.js"></script>
<script type="text/javascript" src="js/core.js"></script>
<script type="text/javascript" src="js/jquery.pagination.js"></script>
<script type="text/javascript" src="js/jquery.grid.js"></script>
<script type="text/javascript" src="js/WdatePicker.js"></script>
<script type="text/javascript">
    var arr=[]
    $.ajax({
        url: "http://localhost:8080/AllMonitor",
        type : "post",//请求方式
        dataType: "json",
        success: function (data) {
         $.each(data,function (key,value) {
             arr.push([value.id,value.leName,value.time,value.location,value.amounts,value.invigilator,value.teacher])
         })
        }
    })

	$('select').select();
	var head = [{
				label: 'ID',
				width: 100,
				sortable: 'default',
				name: 'id'	
			},{
				label:'课程名称',
				width: 150,
				sortable: 'default',
				name:'name'	
			},{
				label:'考试时间',
				width:150	
			},{
				label: '考试地点',
				minWidth: 150	
			},{
				label: '考试人数',
				width: 150	
			},{
				label: '监考员',
				width: 150	
			},{
				label: '任课教师',
				width:150	
			}];
			

	var tbody =arr
					
		$('.grid').Grid({
			thead: head,
			tbody: null,
			height:400,
			checkbox: {
				single:true	
			},
			sortCallBack : function(name,index,type){
				alert(name+","+index+','+type);
			}
			
		});
	
	$('.grid').Grid('addLoading');
	
	/// 模拟异步
	setTimeout(function(){
		$('.grid').Grid('setData',tbody, head);
	},2000)
	
	
	$('.pagination').pagination(100,{
		callback: function(page){
			alert(page);	
		},
		display_msg: false
	});
	
	$('.search-box input[type=radio]').click(function(e) {
        if($(this).prop('checked')){
			if($(this).attr('data-define') === 'define'){
				$('.define-input').show();
			}else{
				$('.define-input').hide();
			}
		}
    });

	function beInvigilate(){
        $.ajax({
            url: "http://localhost:8080/beInvigilate",
            type : "post",//请求方式
            dataType: "json",
            success: function (data) {
                var arr=[]
                $.each(data,function (key,value) {
                    arr.push([value.id,value.leName,value.time,value.location,value.amounts,value.invigilator,value.teacher])
                })
                updateTable(arr)
        }
        })
        function beTeacher(){
            $.ajax({
                url: "http://localhost:8080/beTeacher",
                type : "post",//请求方式
                dataType: "json",
                success: function (data) {
                    var arr=[]
                    $.each(data,function (key,value) {
                        arr.push([value.id,value.leName,value.time,value.location,value.amounts,value.invigilator,value.teacher])
                    })
                    updateTable(arr)
                }
            })
function updateTable( arr){
    var head = [{
        label: 'ID',
        width: 100,
        sortable: 'default',
        name: 'id'
    },{
        label:'课程名称',
        width: 150,
        sortable: 'default',
        name:'name'
    },{
        label:'考试时间',
        width:150
    },{
        label: '考试地点',
        minWidth: 150
    },{
        label: '考试人数',
        width: 150
    },{
        label: '监考员',
        width: 150
    },{
        label: '任课教师',
        width:150
    }];


    var tbody =arr

    $('.grid').Grid({
        thead: head,
        tbody: null,
        height:400,
        checkbox: {
            single:true
        },
        sortCallBack : function(name,index,type){
            alert(name+","+index+','+type);
        }

    });

    $('.grid').Grid('addLoading');

    /// 模拟异步
    setTimeout(function(){
        $('.grid').Grid('setData',tbody, head);
    },1000)


}


    }
</script>
</html>
